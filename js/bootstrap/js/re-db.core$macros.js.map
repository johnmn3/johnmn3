{"version":3,"file":"re-db.core$macros.js","sources":["re_db/core$macros.cljc"],"mappings":"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","names":["body","m","iter__4324__auto__","s__18676","cljs.core/LazySeq","temp__5457__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4322__auto__","size__4323__auto__","cljs.core/count","b__18678","cljs.core/chunk-buffer","i__18677","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__18675","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","k","ks","s__18692","b__18694","i__18693","iter__18691","cljs.core.drop_last.cljs$core$IFn$_invoke$arity$1","cljs.core/List","cljs.core/chunk-first","ret__4565__auto__","var_args","args__4534__auto__","len__4531__auto__","i__4532__auto__","argseq__4535__auto__","cljs.core/IndexedSeq","re-db.core$macros/db-log","&form","&env","cljs.core.sequence.cljs$core$IFn$_invoke$arity$1","cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic","cljs.core/vec","cljs.core.concat.cljs$core$IFn$_invoke$arity$2","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/array-map","cljs.core.concat.cljs$core$IFn$_invoke$arity$0","seq18716","G__18717","cljs.core/next","G__18718","self__4518__auto__","not-found","re-db.core$macros/peek","seq18648","G__18649","G__18650","cljs.core/vector?","cljs.core/last","G__18670","re-db.core$macros/get-in*","js/Error"],"sourcesContent":["(ns re-db.core\n  (:refer-clojure :exclude [peek]))\n\n(defmacro peek\n  \"Evaluates body without tracking read patterns.\"\n  [& body]\n  `(binding [~'re-db.core/*access-log* nil]\n     (do ~@body)))\n\n(defmacro get-in*\n  \"Compiled version of get-in, small performance boost over the `get-in` function.\"\n  ([m ks]\n   (if-not (vector? ks)\n     `(clojure.core/get-in ~m ~ks)\n     `(-> ~m\n          ~@(for [k ks]\n              (list 'clojure.core/get k)))))\n  ([m ks not-found]\n   (if-not (vector? ks)\n     `(clojure.core/get-in ~m ~ks ~not-found)\n     `(-> ~m\n          ~@(for [k (drop-last ks)]\n              (list 'clojure.core/get k))\n          (clojure.core/get ~(last ks) ~not-found)))))\n\n(defmacro db-log [& body]\n  `(binding [~'re-db.core/*db-log* (atom {})\n             ~'re-db.core/*prevent-notify* true]\n     (let [value# (do ~@body)]\n       {:tx-report @~'re-db.core/*db-log*\n        :value     value#})))"]}