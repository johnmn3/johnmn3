{"version":3,"file":"thi.ng.strf.core.js","sources":["thi/ng/strf/core.cljc"],"mappings":"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","names":["var_args","args__4534__auto__","len__4531__auto__","i__4532__auto__","argseq__4535__auto__","cljs.core/IndexedSeq","thi.ng.strf.core/parse-int","p__35156","vec__35157","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","seq35141","G__35142","cljs.core/first","cljs.core/next","G__35143","self__4518__auto__","x","radix","default","x'","js/parseInt","js/isNaN","thi.ng.strf.core/parse-long","p__35209","vec__35210","seq35197","G__35198","G__35199","thi.ng.strf.core.parse_int.cljs$core$IFn$_invoke$arity$variadic","thi.ng.strf.core/parse-float","p__35221","vec__35222","seq35219","G__35220","js/parseFloat","thi.ng.strf.core/parse-double","p__35239","vec__35240","seq35235","G__35236","thi.ng.strf.core.parse_float.cljs$core$IFn$_invoke$arity$variadic","thi.ng.strf.core/parse-boolean","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","clojure.string/lower-case","thi.ng.strf.core/int","cljs.core/int","thi.ng.strf.core/long","thi.ng.strf.core/float","cljs.core/memoize","prec","js/Number","thi.ng.strf.core/double","thi.ng.strf.core/pad-left","len","fill","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/str","cljs.core.repeat.cljs$core$IFn$_invoke$arity$2","l","cljs.core/count","cljs.core.subs.cljs$core$IFn$_invoke$arity$3","thi.ng.strf.core/pad-right","thi.ng.strf.core/hex","pad","G__35253","thi.ng.strf.core/trunc-left","thi.ng.strf.core/trunc-right","cljs.core.subs.cljs$core$IFn$_invoke$arity$2","thi.ng.strf.core/format","seq35256","G__35257","fmt","args","s","temp__5455__auto__","f","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","G__35261","thi.ng.strf.core/date-fields","d","thi.ng.strf.core/time-fields","thi.ng.strf.core/datetime-fields","thi.ng.strf.core/date-formatters","d2","cljs.core.comp.cljs$core$IFn$_invoke$arity$2","cljs.core.apply.cljs$core$IFn$_invoke$arity$3","vec__35297","y","m","thi.ng.strf.core.format.cljs$core$IFn$_invoke$arity$variadic","vec__35300","vec__35307","p1__35292#","cljs.core/mod","G__35339","thi.ng.strf.core/format-date","js/Error","fexpr__35341","G__35342","cljs.core/fn?","fexpr__35343","thi.ng.strf.core/now","js/Date","thi.ng.strf.core/timestamp","thi.ng.strf.core/format-16bit-hex","G__35348","G__35349","thi.ng.strf.core/rand-bits","bits","G__35350","cljs.core.rand.cljs$core$IFn$_invoke$arity$0","thi.ng.strf.core/rand-bits-hex","G__35355","fexpr__35354","G__35356","G__35357","G__35358","Math/ceil","thi.ng.strf.core/rand-16bits-hex","G__35359","cljs.core/rand-int","thi.ng.strf.core/new-uuid","G__35360","G__35361","thi.ng.strf.core/html-entities","thi.ng.strf.core/as-str","cljs.core/Keyword","cljs.core/Symbol","cljs.core/name","thi.ng.strf.core/escape-html","clojure.string/escape"],"sourcesContent":["(ns thi.ng.strf.core\n  (:refer-clojure :exclude [float int long double format])\n  (:require\n   [clojure.string :as str])\n  #?(:clj (:import [java.util Calendar Date])))\n\n(defn parse-int\n  [^String x radix & [default]]\n  #?(:clj\n     (try (Integer/parseInt x radix) (catch Exception e default))\n     :cljs\n     (let [x' (js/parseInt x radix)] (if (js/isNaN x') default x'))))\n\n(defn parse-long\n  [^String x radix & [default]]\n  #?(:clj\n     (try (Long/parseLong x radix) (catch Exception e default))\n     :cljs\n     (parse-int x radix default)))\n\n(defn parse-float\n  [^String x & [default]]\n  #?(:clj\n     (try (Float/parseFloat x) (catch Exception e default))\n     :cljs\n     (let [x' (js/parseFloat x)] (if (js/isNaN x') default x'))))\n\n(defn parse-double\n  [^String x & [default]]\n  #?(:clj\n     (try (Double/parseDouble x) (catch Exception e default))\n     :cljs\n     (parse-float x default)))\n\n(defn parse-boolean\n  [^String x]\n  #?(:clj\n     (Boolean/parseBoolean x)\n     :cljs\n     (= \"true\" (str/lower-case x))))\n\n(def int clojure.core/int)\n\n(def long #?(:clj clojure.core/long :cljs int))\n\n(def float\n  (memoize\n   (fn [prec]\n     #?(:clj\n        (let [fmt (str \"%1.\" prec \"f\")]\n          (fn [x] (clojure.core/format fmt (clojure.core/float x))))\n        :cljs\n        (fn [x] (.toFixed (js/Number. x) prec))))))\n\n(def double\n  (memoize\n   (fn [prec]\n     #?(:clj\n        (let [fmt (str \"%1.\" prec \"f\")]\n          (fn [x] (clojure.core/format fmt (clojure.core/double x))))\n        :cljs\n        (fn [x] (.toFixed (js/Number. x) prec))))))\n\n(def pad-left\n  (memoize\n   (fn [len fill]\n     (let [fill (apply str (repeat len fill))]\n       (fn [x]\n         (let [l (count x)]\n           (if (< l len) (str (subs fill 0 (- len l)) x) x)))))))\n\n(def pad-right\n  (memoize\n   (fn [len fill]\n     (let [fill (apply str (repeat len fill))]\n       (fn [x]\n         (let [l (count x)]\n           (if (< l len) (str x (subs fill 0 (- len l))) x)))))))\n\n(def hex\n  (memoize\n   (fn [len]\n     #?(:clj\n        (let [fmt (str \"%0\" len \"x\")]\n          (fn [x] (clojure.core/format fmt (long x))))\n        :cljs\n        (let [pad (pad-left len \"0\")]\n          (fn [x] (pad (.toString (js/Number. (int x)) 16))))))))\n\n(defn trunc-left\n  [len]\n  (fn [x]\n    (let [l (count x)]\n      (if (<= l len) x (subs x 0 len)))))\n\n(defn trunc-right\n  [len]\n  (fn [x]\n    (let [l (count x)]\n      (if (<= l len) x (subs x (- l len))))))\n\n(defn format\n  [fmt & args]\n  #?(:clj\n     (loop [s (StringBuilder.), fmt fmt, args args]\n       (if-let [f (first fmt)]\n         (if (string? f)\n           (recur (.append s f) (next fmt) args)\n           (recur (.append s (f (first args))) (next fmt) (next args)))\n         (.toString s)))\n     :cljs\n     (loop [s [], fmt fmt, args args]\n       (if-let [f (first fmt)]\n         (if (string? f)\n           (recur (conj s f) (next fmt) args)\n           (recur (conj s (f (first args))) (next fmt) (next args)))\n         (apply str s)))))\n\n#?(:clj\n   (defn calendar-instance\n     ^Calendar [d] (doto (Calendar/getInstance) (.setTime ^Date d))))\n\n(defn date-fields\n  [d]\n  #?(:clj\n     (let [c (calendar-instance d)]\n       [(.get c Calendar/YEAR)\n        (inc (.get c Calendar/MONTH))\n        (.get c Calendar/DAY_OF_MONTH)])\n     :cljs\n     [[(.getFullYear d)\n       (inc (.getMonth d))\n       (.getDate d)]]))\n\n(defn time-fields\n  [d]\n  #?(:clj\n     (let [c (calendar-instance d)]\n       [(.get c Calendar/HOUR_OF_DAY)\n        (inc (.get c Calendar/MINUTE))\n        (.get c Calendar/SECOND)])\n     :cljs\n     [[(.getHours d)\n       (.getMinutes d)\n       (.getSeconds d)]]))\n\n(defn datetime-fields\n  [d]\n  #?(:clj\n     (let [c (calendar-instance d)]\n       [(.get c Calendar/YEAR)\n        (inc (.get c Calendar/MONTH))\n        (.get c Calendar/DAY_OF_MONTH)\n        (.get c Calendar/HOUR_OF_DAY)\n        (inc (.get c Calendar/MINUTE))\n        (.get c Calendar/SECOND)])\n     :cljs\n     [[(.getFullYear d)\n       (inc (.getMonth d))\n       (.getDate d)\n       (.getHours d)\n       (.getMinutes d)\n       (.getSeconds d)]]))\n\n(def date-formatters\n  (let [d2 (comp (pad-left 2 \"0\") str)]\n    {:yyyy-mm-dd\n     (fn [d]\n       (apply format [str \"-\" d2 \"-\" d2] (date-fields d)))\n     :yyyy-mm-dd-hh-mm-ss\n     (fn [d]\n       (apply format [str \"-\" d2 \"-\" d2 \" \" d2 \":\" d2 \":\" d2] (datetime-fields d)))\n     :yyyymmdd-hhmmss\n     (fn [d]\n       (apply format [str d2 d2 \"-\" d2 d2 d2] (datetime-fields d)))\n     :dd-mm-yyyy\n     (fn [d]\n       (let [[y m d] (date-fields d)]\n         (format [d2 \"/\" d2 \"/\" str] d m y)))\n     :mm-dd-yyyy\n     (fn [d]\n       (let [[y m d] (date-fields d)]\n         (format [d2 \"/\" d2 \"/\" str] m d y)))\n     :dd-mm-yy\n     (fn [d]\n       (let [[y m d] (date-fields d)]\n         (format [d2 \"/\" d2 \"/\" (comp d2 #(mod % 100))] d m y)))\n     :hh-mm-ss\n     (fn [d]\n       (apply format [d2 \":\" d2 \":\" d2] (time-fields d)))}))\n\n(defn format-date\n  ([d] ((date-formatters :yyyy-mm-dd-hh-mm-ss) d))\n  ([fmt d] (if (fn? fmt) (fmt d) ((date-formatters fmt) d))))\n\n(defn now\n  [] #?(:clj (Date.) :cljs (js/Date.)))\n\n(defn timestamp\n  [] #?(:clj (System/currentTimeMillis) :cljs (.getTime (js/Date.))))\n\n(def ^:private format-16bit-hex (pad-left 4 \\0))\n\n(defn rand-bits\n  [bits] (int (* (rand) (bit-shift-left 1 bits))))\n\n(defn rand-bits-hex\n  [bits]\n  ((pad-left (Math/ceil (/ bits 4)) \\0)\n   (#?(:clj Integer/toString :cljs .toString) (rand-bits bits) 16)))\n\n(defn rand-16bits-hex\n  [] (format-16bit-hex (#?(:clj Integer/toString :cljs .toString) (rand-int 0x10000) 16)))\n\n(defn new-uuid\n  []\n  #?(:clj\n     (str (java.util.UUID/randomUUID))\n     :cljs (str\n            (rand-16bits-hex) (rand-16bits-hex)\n            \\- (rand-16bits-hex)\n            \\- (-> (rand-bits 16) (bit-and 0x0fff) (bit-or 0x4000) (.toString 16) (format-16bit-hex))\n            \\- (-> (rand-bits 16) (bit-and 0x3fff) (bit-or 0x8000) (.toString 16) (format-16bit-hex))\n            \\- (rand-16bits-hex) (rand-16bits-hex) (rand-16bits-hex))))\n\n(def html-entities\n  {\\& \"&amp;\"\n   \\< \"&lt;\"\n   \\> \"&gt;\"\n   \\\" \"&quot;\"})\n\n(defn as-str [x]\n  (if (or (keyword? x) (symbol? x))\n    (name x)\n    (str x)))\n\n(defn escape-html\n  [x] (str/escape (as-str x) html-entities))\n"]}